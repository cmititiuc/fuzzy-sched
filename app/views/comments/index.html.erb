<style>
  td { padding: 1em; vertical-align: top; }
  td.commentable_link a { font-size: medium; }
  td.comment { line-height: 1.5em; }
  td.comment_actions a { font-size: x-small; }
  td p { padding-top: 0; margin-top: 0; }
</style>

<p id="notice"><%= notice %></p>

<h1>Listing comments</h1>

<div style="text-align: center;">
  <%= link_to 'clear filter', comments_path if params[:filter] %>
  <% Event.all.each do |event| %>
    <%= link_to event.name, comments_path(:filter=>event.id) %>
  <% end %>
</div>

<table style="margin-left: auto; margin-right: auto;">
  <% day = nil %>
  <% @comments.each do |comment| %>
    <% commentable = comment.commentable_type.constantize.find(comment.commentable_id) rescue nil %>
    <tr>
      <td style="white-space: nowrap; font-size: medium;">
        <% unless day == comment.created_at.strftime('%A') %>
          <% day = comment.created_at.strftime('%A') %>
           <%= comment.created_at.strftime('%a, %b %d, %Y') %>
        <% end %>
      </td>
      <td style="font-size: medium; white-space: nowrap;">
        <%= comment.created_at.strftime('%-I:%M %p') %>
      </td>
      <td class="commentable_link"><%= link_to commentable.name, commentable if commentable %></td>
      <td class="comment"><%= simple_format(comment.comment) %></td>
      <td class="comment_actions" style="white-space: nowrap;">
        <%= link_to 'Show', comment %> |
        <%= link_to 'Edit', edit_comment_path(comment) %> |
        <%= link_to 'Destroy', comment, method: :delete, data: { confirm: 'Are you sure?' } %>
      </td>
    </tr>
  <% end %>
</table>
<% if @comments.blank? %>
  <div style="text-align: center; padding: 1em; line-height: 1.5em; font-size: medium;">No comments.</div>
<% end %>

<br>

<%= link_to 'New Comment', new_comment_path %>
